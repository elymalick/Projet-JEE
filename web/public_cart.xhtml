<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
   
    <h:head>
        <title>liste des produits</title>
        <link type="text/css" rel="stylesheet" href="/css/home.css" />
        <link type="text/css" rel="stylesheet" href="css/style.css" />
        <h:link class="css/home.css" rel="stylesheet" type="text/css" ></h:link>

    </h:head>
    <h:body>



        <div id="conteneur">
            <div id="noir">

                <header>
                    <div id="entete">

                        <div id="nom"><h1>APPLICATION J2EE TER 2014</h1></div>
                    </div>

                </header>
            </div> 

            <div id="menu">
                <div id="option">
                    <ul>
                        <li><a href="ProductListServlet?categoryId=-1">Tous les categories</a></li>
                        <c:forEach var="category" items="#{categorieMBean.categories}">
                              <!--<li><a href="ProductListServlet?categoryId=${category.categorieid}">${category.nomcategorie}</a></li>-->

                            <li>  <h:link outcome="#{productListByCategorie.showListProdutByCat(category.categorieid)}" value="#{category.nomcategorie}"/> </li>
                        </c:forEach>
                             <h:form> 
                    <li> <h:commandButton value="Creer un compte" action="#{customerMBean.log()}" styleClass="sansLabel" /></li> 
                    <li> <h:commandButton value="se Loger" action="#{customerMBean.logsucces()}" styleClass="sansLabel" /></li> 
                    <li> <h:commandButton value="Voir votre panier" action="#{currentUserMBean.getListCart()}" styleClass="sansLabel" /></li> 
                    
                    
                    
                    
               </h:form>
                        <!--<li> <a href="publicLogin.xhtml" >Creer un compte</a> </li>-->
                    </ul>
                </div>



            </div>





            <div id="center" >
                <div class="cart"> <a href="CartServlet"><img src="images/Shopping_Cart.png" alt="" title="Panier" /></a></div>
                <div class="productList">

                    <fieldset>

                        <h1>Panier virtuel</h1>
                        <p>
                            Voici le contenu de votre panier .

                        </p>
                        <h2>
                            Recapitulatif des produits que vous souhaitez achetez :
                        </h2>

                      

                        <h:form>

                            <p:dataTable value="#{currentUserMBean.allPanier}" var="item" >



                                <p:column>

                                    <f:facet name="header">
                                        <h:outputText value="Nomproduit"/>
                                    </f:facet>
                                    <h:outputText value="#{item.nomproduit}"/>

                                </p:column>



                                <p:column>

                                    <f:facet name="header">
                                        <h:outputText value="Prixunitaire"/>
                                    </f:facet>
                                    <h:outputText value="#{item.prixunitaire}"/>

                                </p:column>

                                <p:column>

                                    <f:facet name="header">
                                        <h:outputText value="Quantiteenstock"/>
                                    </f:facet>
                                    <h:outputText value="#{item.quantiteenstock}"/>



                                </p:column>



                                <p:column>

                                    <f:facet name="header">
                                        <h:outputText value="Photo"/>
                                    </f:facet>
                                    <!--<h:outputText value="#{item.photo}"/>-->

                                    <img src="images/${item.photo}" alt="" />

                                </p:column>


                                <p:column>
                                    <h:commandButton value="Annuler" action="#{currentUserMBean.removeFromPanier()}" >
                                        <f:param name="id" value="#{item.produitid}" />
                                        
                                    </h:commandButton>

                                </p:column>


                            </p:dataTable>

                            <br/>
                            <br/>
                            <h:commandButton  action="#{currentUserMBean.validPanier()}" value="Valider la selection" >
                                <f:param name="id" value="#{item.produitid}" />
                                
                            </h:commandButton>

                        </h:form>

                    </fieldset>

                </div>
            </div>
        </div>  
    </h:body>
</html>